!function(){"use strict";window.app={module:angular.module("ttContacts",["ngMaterial","ngCordova"])},app.module.config(["$mdThemingProvider","$mdIconProvider",function(e,t){t.defaultIconSet("./assets/svg/avatars.svg",128).icon("menu","./assets/svg/menu.svg",24).icon("share","./assets/svg/share.svg",24).icon("google_plus","./assets/svg/google_plus.svg",512).icon("hangouts","./assets/svg/hangouts.svg",512).icon("twitter","./assets/svg/twitter.svg",512).icon("phone","./assets/svg/phone.svg",512)}]),app.module.run(["menuService",function(){}])}(),function(){"use strict";function e(e,t){return t.get(e.cordova?"cordovaContactsService":"nwContactsService")}e.$inject=["$window","$injector"],app.module.factory("contactsService",e)}(),function(){"use strict";function e(e,t,a){this.createContact=function(r){var i=a.defer(),o={};return o.displayName=r.firstName+" "+r.firstName+" (TT-C)",o.name={},o.name.givenName=r.firstName,o.name.familyName=r.lastName,o.phoneNumbers=[],o.phoneNumbers[0]={type:"work",value:r.phone,preference:!0},o.emails=[],o.emails[0]={type:"work",value:r.email,preference:!0},o.note="From TT Contacts!",e.save(o).then(function(e){t.debug("### Contact successfully saved."),i.resolve(e)},function(e){t.debug("### Error saving Contact: "+e),i.reject(e)}),i.promise}}e.$inject=["$cordovaContacts","$log","$q"],app.module.service("cordovaContactsService",e)}(),function(){"use strict";function e(e,t){this.createContact=function(){function a(t,a){var i=document.querySelector("#"+t);i.addEventListener("change",function(){var t=require("fs");e.debug("### Writing VCard"),t.writeFile(this.value,a,function(e){e?r.reject(e):r.resolve()})},!1),i.click()}var r=t.defer(),i="exportFile",o=document.querySelector("#"+i);if(!o){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("nwsaveas",""),n.setAttribute("style","display:none;"),n.setAttribute("id",i),o=document.querySelector("body").appendChild(n)}return a(i,"THIS WILL BE A VCARD SOON ;)"),r.promise}}e.$inject=["$log","$q"],app.module.service("nwContactsService",e)}(),function(){"use strict";function e(e){var t=[{firstName:"Ingo",lastName:"Rammer",email:"ingo.rammer@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-1",content:"I love cheese, especially airedale queso. Cheese and biscuits halloumi cauliflower cheese cottage cheese swiss boursin fondue caerphilly. Cow port-salut camembert de normandie macaroni cheese feta who moved my cheese babybel boursin. Red leicester roquefort boursin squirty cheese jarlsberg blue castello caerphilly chalk and cheese. Lancashire."},{firstName:"Christian",lastName:"Weyer",email:"christian.weyer@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-2",content:"Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris."},{firstName:"Marco",lastName:"Frodl",email:"marco.frodl@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-9",content:"Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris."},{firstName:"Dominick",lastName:"Baier",email:"dominick.baier@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-3",content:"Raw denim pour-over readymade Etsy Pitchfork. Four dollar toast pickled locavore bitters McSweeney's blog. Try-hard art party Shoreditch selfies. Odd Future butcher VHS, disrupt pop-up Thundercats chillwave vinyl jean shorts taxidermy master cleanse letterpress Wes Anderson mustache Helvetica. Schlitz bicycle rights chillwave irony lumbersexual Kickstarter next level sriracha typewriter Intelligentsia, migas kogi heirloom tousled. Disrupt 3 wolf moon lomo four loko. Pug mlkshk fanny pack literally hoodie bespoke, put a bird on it Marfa messenger bag kogi VHS."},{firstName:"Thomas",lastName:"Hilzendegen",email:"thomas.hilzendegen@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-4",content:"Scratch the furniture spit up on light gray carpet instead of adjacent linoleum so eat a plant, kill a hand pelt around the house and up and down stairs chasing phantoms run in circles, or claw drapes. Always hungry pelt around the house and up and down stairs chasing phantoms."},{firstName:"Pawel",lastName:"Gerr",email:"pawel.gerr@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-5",content:"Webtwo ipsum dolor sit amet, eskobo chumby doostang bebo. Bubbli greplin stypi prezi mzinga heroku wakoopa, shopify airbnb dogster dopplr gooru jumo, reddit plickers edmodo stypi zillow etsy."},{firstName:"Steffen",lastName:"Jahr",email:"steffen.jahr@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-6",content:"Lebowski ipsum yeah? What do you think happens when you get rad? You turn in your library card? Get a new driver's license? Stop being awesome? Dolor sit amet, consectetur adipiscing elit praesent ac magna justo pellentesque ac lectus. You don't go out and make a living dressed like that in the middle of a weekday. Quis elit blandit fringilla a ut turpis praesent felis ligula, malesuada suscipit malesuada."},{firstName:"Manuel",lastName:"Rauber",email:"manuel.rauber@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-7",content:"I love cheese, especially airedale queso. Cheese and biscuits halloumi cauliflower cheese cottage cheese swiss boursin fondue caerphilly. Cow port-salut camembert de normandie macaroni cheese feta who moved my cheese babybel boursin. Red leicester roquefort boursin squirty cheese jarlsberg blue castello caerphilly chalk and cheese. Lancashire."},{firstName:"Christian",lastName:"Liebel",email:"christian.liebel@thinktecture.com",phone:"+49 721 7540380",avatar:"svg-8",content:"Zombie ipsum reversus ab viral inferno, nam rick grimes malum cerebro. De carne lumbering animata corpora quaeritis. Summus brains sit​​, morbo vel maleficia? De apocalypsi gorger omero undead survivor dictum mauris."}];return{loadAll:function(){return e.when(t)}}}e.$inject=["$q"],app.module.service("usersDataService",e)}(),function(){"use strict";function e(e,t,a,r,i,o){function n(){t("left").toggle()}function s(e){l.selected=angular.isNumber(e)?$scope.users[e]:e,l.toggleList()}function c(){function e(e){this.user=t,this.items=[{name:"Phone",icon:"phone"},{name:"Twitter",icon:"twitter"},{name:"Google+",icon:"google_plus"},{name:"Hangout",icon:"hangouts"}],this.performAction=function(t){e.hide(t)}}var t=l.selected;a.show({parent:angular.element(document.getElementById("content")),templateUrl:"app/users/contactSheet.html",controller:e,controllerAs:"vm"}).then(function(e){i.debug("### "+e.name+" clicked!"),"Phone"==e.name&&o.createContact(l.selected).then(function(){r.show(r.alert().title("Success").content("Contact exported.").ok(" OK "))},function(){})}),e.$inject=["$mdBottomSheet"]}var l=this;l.selected=null,l.users=[],l.selectUser=s,l.toggleList=n,l.share=c,e.loadAll().then(function(e){l.users=[].concat(e),l.selected=e[0]})}e.$inject=["usersDataService","$mdSidenav","$mdBottomSheet","$mdDialog","$log","contactsService"],app.module.controller("UsersListController",e)}(),function(){"use strict";function e(){if("undefined"!=typeof process&&"undefined"!=typeof require){var e=require("nw.gui"),t=new e.Menu({type:"menubar"});t.createMacBuiltin("TT Contacts");var a=e.Window.get();a.menu=t}}app.module.service("menuService",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRhY3RzL2NvbnRhY3RzU2VydmljZS5qcyIsImFsbC5qcyIsImNvbnRhY3RzL2NvcmRvdmFDb250YWN0c1NlcnZpY2UuanMiLCJjb250YWN0cy9ud0NvbnRhY3RzU2VydmljZS5qcyIsInVzZXJzL3VzZXJzRGF0YVNlcnZpY2UuanMiLCJ1c2Vycy91c2Vyc0xpc3QuanMiLCJzZXJ2aWNlcy9tZW51U2VydmljZS5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJhcHAiLCJtb2R1bGUiLCJhbmd1bGFyIiwiY29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiJG1kSWNvblByb3ZpZGVyIiwiZGVmYXVsdEljb25TZXQiLCJpY29uIiwicnVuIiwiQ29udGFjdHNTZXJ2aWNlIiwiJHdpbmRvdyIsIiRpbmplY3RvciIsImdldCIsImNvcmRvdmEiLCIkaW5qZWN0IiwiZmFjdG9yeSIsIiRjb3Jkb3ZhQ29udGFjdHMiLCIkbG9nIiwiJHEiLCJ0aGlzIiwiY3JlYXRlQ29udGFjdCIsInBlcnNvbiIsImRlZmVycmVkIiwiZGVmZXIiLCJjb3Jkb3ZhQ29udGFjdCIsImRpc3BsYXlOYW1lIiwiZmlyc3ROYW1lIiwibmFtZSIsImdpdmVuTmFtZSIsImZhbWlseU5hbWUiLCJsYXN0TmFtZSIsInBob25lTnVtYmVycyIsInR5cGUiLCJ2YWx1ZSIsInBob25lIiwicHJlZmVyZW5jZSIsImVtYWlscyIsImVtYWlsIiwibm90ZSIsInNhdmUiLCJ0aGVuIiwicmVzdWx0IiwiZGVidWciLCJyZXNvbHZlIiwiZXJyIiwicmVqZWN0IiwicHJvbWlzZSIsInNlcnZpY2UiLCJzYXZlRmlsZSIsImRhdGEiLCJjaG9vc2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZzIiwicmVxdWlyZSIsIndyaXRlRmlsZSIsImNsaWNrIiwiZGxnTmFtZSIsImRsZyIsImZpbGVJbnB1dCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJhcHBlbmRDaGlsZCIsIlVzZXJzRGF0YVNlcnZpY2UiLCJ1c2VycyIsImF2YXRhciIsImNvbnRlbnQiLCJsb2FkQWxsIiwid2hlbiIsIlVzZXJzTGlzdENvbnRyb2xsZXIiLCJ1c2Vyc0RhdGFTZXJ2aWNlIiwiJG1kU2lkZW5hdiIsIiRtZEJvdHRvbVNoZWV0IiwiJG1kRGlhbG9nIiwiY29udGFjdHNTZXJ2aWNlIiwidG9nZ2xlVXNlcnNMaXN0IiwidG9nZ2xlIiwic2VsZWN0VXNlciIsInVzZXIiLCJzZWxmIiwic2VsZWN0ZWQiLCJpc051bWJlciIsIiRzY29wZSIsInRvZ2dsZUxpc3QiLCJzaGFyZSIsIlVzZXJTaGVldENvbnRyb2xsZXIiLCJpdGVtcyIsInBlcmZvcm1BY3Rpb24iLCJhY3Rpb24iLCJoaWRlIiwic2hvdyIsInBhcmVudCIsImVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsImNsaWNrZWRJdGVtIiwiYWxlcnQiLCJ0aXRsZSIsIm9rIiwiY29uY2F0IiwiTWVudVNlcnZpY2UiLCJwcm9jZXNzIiwiZ3VpIiwibmF0aXZlTWVudUJhciIsIk1lbnUiLCJjcmVhdGVNYWNCdWlsdGluIiwiV2luZG93IiwibWVudSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxRQUFBQyxLQUFBQyxPQUFBQyxRQUFBRCxPQUFBLGNBQUEsYUFBQSxlQUVBRCxJQUFBQyxPQUFBRSxRQUFBLHFCQUFBLGtCQUFBLFNBQUFDLEVBQUFDLEdBQ0FBLEVBQ0FDLGVBQUEsMkJBQUEsS0FDQUMsS0FBQSxPQUFBLHdCQUFBLElBQ0FBLEtBQUEsUUFBQSx5QkFBQSxJQUNBQSxLQUFBLGNBQUEsK0JBQUEsS0FDQUEsS0FBQSxXQUFBLDRCQUFBLEtBQ0FBLEtBQUEsVUFBQSwyQkFBQSxLQUNBQSxLQUFBLFFBQUEseUJBQUEsUUFHQVAsSUFBQUMsT0FBQU8sS0FBQSxjQUFBLGtCQ2hCQSxXQUNBLFlBS0EsU0FBQUMsR0FBQUMsRUFBQUMsR0FD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QUFBeUIsUUFDQUMsTUFBQSxXQUNBakMsUUFBQSxxQkFDQWtDLEdBQUEsVUFFQSxnQkp1T1lmLEVBQW9CeEUsU0FBVyxrQkluUjNDLEdBQUFrRSxHQUFBN0QsSUFFQTZELEdBQUFDLFNBQUEsS0FDQUQsRUFBQWYsU0FDQWUsRUFBQUYsV0FBQUEsRUFDQUUsRUFBQUksV0FBQVIsRUFDQUksRUFBQUssTUFBQUEsRUFFQWQsRUFDQUgsVUFDQTVCLEtBQUEsU0FBQXlCLEdBQ0FlLEVBQUFmLFNBQUFxQyxPQUFBckMsR0FDQWUsRUFBQUMsU0FBQWhCLEVBQUEsS0owUUlLLEVBQW9CeEQsU0FBVyxtQkFBb0IsYUFBYyxpQkFBa0IsWUFBYSxPQUFRLG1CSXJONUdkLElBQUFDLE9BQUErRixXQUFBLHNCQUFBMUIsTUNyRUEsV0FDQSxZQUtBLFNBQUFpQyxLQUNBLEdBQUEsbUJBQUFDLFVBQUEsbUJBQUFqRCxTQUFBLENBQ0EsR0FBQWtELEdBQUFsRCxRQUFBLFVBRUFtRCxFQUFBLEdBQUFELEdBQUFFLE1BQUEzRSxLQUFBLFdBQ0EwRSxHQUFBRSxpQkFBQSxjQUVBLElBQUE3RyxHQUFBMEcsRUFBQUksT0FBQWpHLEtBQ0FiLEdBQUErRyxLQUFBSixHQUlBMUcsSUFBQUMsT0FBQThDLFFBQUEsY0FBQXdEIiwiZmlsZSI6ImFsbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB3aW5kb3cuYXBwID0geyBtb2R1bGU6IGFuZ3VsYXIubW9kdWxlKCd0dENvbnRhY3RzJywgWyduZ01hdGVyaWFsJywgJ25nQ29yZG92YSddKSB9O1xuXG4gICAgYXBwLm1vZHVsZS5jb25maWcoZnVuY3Rpb24gKCRtZFRoZW1pbmdQcm92aWRlciwgJG1kSWNvblByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkbWRJY29uUHJvdmlkZXJcbiAgICAgICAgICAgICAgICAuZGVmYXVsdEljb25TZXQoXCIuL2Fzc2V0cy9zdmcvYXZhdGFycy5zdmdcIiwgMTI4KVxuICAgICAgICAgICAgICAgIC5pY29uKFwibWVudVwiLCBcIi4vYXNzZXRzL3N2Zy9tZW51LnN2Z1wiLCAyNClcbiAgICAgICAgICAgICAgICAuaWNvbihcInNoYXJlXCIsIFwiLi9hc3NldHMvc3ZnL3NoYXJlLnN2Z1wiLCAyNClcbiAgICAgICAgICAgICAgICAuaWNvbihcImdvb2dsZV9wbHVzXCIsIFwiLi9hc3NldHMvc3ZnL2dvb2dsZV9wbHVzLnN2Z1wiLCA1MTIpXG4gICAgICAgICAgICAgICAgLmljb24oXCJoYW5nb3V0c1wiLCBcIi4vYXNzZXRzL3N2Zy9oYW5nb3V0cy5zdmdcIiwgNTEyKVxuICAgICAgICAgICAgICAgIC5pY29uKFwidHdpdHRlclwiLCBcIi4vYXNzZXRzL3N2Zy90d2l0dGVyLnN2Z1wiLCA1MTIpXG4gICAgICAgICAgICAgICAgLmljb24oXCJwaG9uZVwiLCBcIi4vYXNzZXRzL3N2Zy9waG9uZS5zdmdcIiwgNTEyKTtcbiAgICAgICAgfSk7XG5cbiAgICBhcHAubW9kdWxlLnJ1bihmdW5jdGlvbiAobWVudVNlcnZpY2UpIHtcbiAgICB9KTtcbn0pKCk7XG5cbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvKipcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb250YWN0c1NlcnZpY2UoJHdpbmRvdywgJGluamVjdG9yKSB7XG4gICAgICAgIGlmICgkd2luZG93LmNvcmRvdmEpIHtcbiAgICAgICAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KCdjb3Jkb3ZhQ29udGFjdHNTZXJ2aWNlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJGluamVjdG9yLmdldCgnbndDb250YWN0c1NlcnZpY2UnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcC5tb2R1bGUuZmFjdG9yeSgnY29udGFjdHNTZXJ2aWNlJywgQ29udGFjdHNTZXJ2aWNlKTtcbn0pKCk7XG4iLG51bGwsIihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDb250YWN0c1NlcnZpY2UoJGNvcmRvdmFDb250YWN0cywgJGxvZywgJHEpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVDb250YWN0ID0gZnVuY3Rpb24ocGVyc29uKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgY29yZG92YUNvbnRhY3QgPSB7fTtcbiAgICAgICAgICAgIGNvcmRvdmFDb250YWN0LmRpc3BsYXlOYW1lID0gcGVyc29uLmZpcnN0TmFtZSArICcgJyArIHBlcnNvbi5maXJzdE5hbWUgKyAnIChUVC1DKSc7XG4gICAgICAgICAgICBjb3Jkb3ZhQ29udGFjdC5uYW1lID0ge307XG4gICAgICAgICAgICBjb3Jkb3ZhQ29udGFjdC5uYW1lLmdpdmVuTmFtZSA9IHBlcnNvbi5maXJzdE5hbWU7XG4gICAgICAgICAgICBjb3Jkb3ZhQ29udGFjdC5uYW1lLmZhbWlseU5hbWUgPSBwZXJzb24ubGFzdE5hbWU7XG4gICAgICAgICAgICBjb3Jkb3ZhQ29udGFjdC5waG9uZU51bWJlcnMgPSBbXTtcbiAgICAgICAgICAgIGNvcmRvdmFDb250YWN0LnBob25lTnVtYmVyc1swXSA9IHt0eXBlOiAnd29yaycsIHZhbHVlOiBwZXJzb24ucGhvbmUsIHByZWZlcmVuY2U6IHRydWUgfTtcbiAgICAgICAgICAgIGNvcmRvdmFDb250YWN0LmVtYWlscyA9IFtdO1xuICAgICAgICAgICAgY29yZG92YUNvbnRhY3QuZW1haWxzWzBdID0ge3R5cGU6ICd3b3JrJywgdmFsdWU6IHBlcnNvbi5lbWFpbCwgcHJlZmVyZW5jZTogdHJ1ZSB9O1xuICAgICAgICAgICAgY29yZG92YUNvbnRhY3Qubm90ZSA9ICdGcm9tIFRUIENvbnRhY3RzISc7XG5cbiAgICAgICAgICAgICRjb3Jkb3ZhQ29udGFjdHMuc2F2ZShjb3Jkb3ZhQ29udGFjdCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkbG9nLmRlYnVnKCcjIyMgQ29udGFjdCBzdWNjZXNzZnVsbHkgc2F2ZWQuJyk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgJGxvZy5kZWJ1ZygnIyMjIEVycm9yIHNhdmluZyBDb250YWN0OiAnICsgZXJyKTtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcC5tb2R1bGUuc2VydmljZSgnY29yZG92YUNvbnRhY3RzU2VydmljZScsIENvbnRhY3RzU2VydmljZSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENvbnRhY3RzU2VydmljZSgkbG9nLCAkcSkge1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRhY3QgPSBmdW5jdGlvbiAocGVyc29uKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgZGxnTmFtZSA9ICdleHBvcnRGaWxlJztcbiAgICAgICAgICAgIHZhciBkbGcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJyArIGRsZ05hbWUpO1xuXG4gICAgICAgICAgICBpZiAoIWRsZykge1xuICAgICAgICAgICAgICAgIHZhciBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgZmlsZUlucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICdmaWxlJyk7XG4gICAgICAgICAgICAgICAgZmlsZUlucHV0LnNldEF0dHJpYnV0ZSgnbndzYXZlYXMnLCAnJyk7XG4gICAgICAgICAgICAgICAgZmlsZUlucHV0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTpub25lOycpO1xuICAgICAgICAgICAgICAgIGZpbGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgZGxnTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBkbGcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JykuYXBwZW5kQ2hpbGQoZmlsZUlucHV0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2F2ZUZpbGUoZGxnTmFtZSwgJ1RISVMgV0lMTCBCRSBBIFZDQVJEIFNPT04gOyknKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gc2F2ZUZpbGUobmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBjaG9vc2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycgKyBuYW1lKTtcblxuICAgICAgICAgICAgICAgIGNob29zZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG4gICAgICAgICAgICAgICAgICAgICRsb2cuZGVidWcoJyMjIyBXcml0aW5nIFZDYXJkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgZnMud3JpdGVGaWxlKHRoaXMudmFsdWUsIGRhdGEsIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KFwiZXJyb3I6IFwiICsgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICBjaG9vc2VyLmNsaWNrKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZS5zZXJ2aWNlKCdud0NvbnRhY3RzU2VydmljZScsIENvbnRhY3RzU2VydmljZSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBmdW5jdGlvbiBVc2Vyc0RhdGFTZXJ2aWNlKCRxKSB7XG4gICAgICAgIHZhciB1c2VycyA9IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICdJbmdvJyxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogJ1JhbW1lcicsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdpbmdvLnJhbW1lckB0aGlua3RlY3R1cmUuY29tJyxcbiAgICAgICAgICAgICAgICBwaG9uZTogJys0OSA3MjEgNzU0MDM4MCcsXG4gICAgICAgICAgICAgICAgYXZhdGFyOiAnc3ZnLTEnLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdJIGxvdmUgY2hlZXNlLCBlc3BlY2lhbGx5IGFpcmVkYWxlIHF1ZXNvLiBDaGVlc2UgYW5kIGJpc2N1aXRzIGhhbGxvdW1pIGNhdWxpZmxvd2VyIGNoZWVzZSBjb3R0YWdlIGNoZWVzZSBzd2lzcyBib3Vyc2luIGZvbmR1ZSBjYWVycGhpbGx5LiBDb3cgcG9ydC1zYWx1dCBjYW1lbWJlcnQgZGUgbm9ybWFuZGllIG1hY2Fyb25pIGNoZWVzZSBmZXRhIHdobyBtb3ZlZCBteSBjaGVlc2UgYmFieWJlbCBib3Vyc2luLiBSZWQgbGVpY2VzdGVyIHJvcXVlZm9ydCBib3Vyc2luIHNxdWlydHkgY2hlZXNlIGphcmxzYmVyZyBibHVlIGNhc3RlbGxvIGNhZXJwaGlsbHkgY2hhbGsgYW5kIGNoZWVzZS4gTGFuY2FzaGlyZS4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJ0NocmlzdGlhbicsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6ICdXZXllcicsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdjaHJpc3RpYW4ud2V5ZXJAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy0yJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnWm9tYmllIGlwc3VtIHJldmVyc3VzIGFiIHZpcmFsIGluZmVybm8sIG5hbSByaWNrIGdyaW1lcyBtYWx1bSBjZXJlYnJvLiBEZSBjYXJuZSBsdW1iZXJpbmcgYW5pbWF0YSBjb3Jwb3JhIHF1YWVyaXRpcy4gU3VtbXVzIGJyYWlucyBzaXTigIvigIssIG1vcmJvIHZlbCBtYWxlZmljaWE/IERlIGFwb2NhbHlwc2kgZ29yZ2VyIG9tZXJvIHVuZGVhZCBzdXJ2aXZvciBkaWN0dW0gbWF1cmlzLidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAnTWFyY28nLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAnRnJvZGwnLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAnbWFyY28uZnJvZGxAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy05JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnWm9tYmllIGlwc3VtIHJldmVyc3VzIGFiIHZpcmFsIGluZmVybm8sIG5hbSByaWNrIGdyaW1lcyBtYWx1bSBjZXJlYnJvLiBEZSBjYXJuZSBsdW1iZXJpbmcgYW5pbWF0YSBjb3Jwb3JhIHF1YWVyaXRpcy4gU3VtbXVzIGJyYWlucyBzaXTigIvigIssIG1vcmJvIHZlbCBtYWxlZmljaWE/IERlIGFwb2NhbHlwc2kgZ29yZ2VyIG9tZXJvIHVuZGVhZCBzdXJ2aXZvciBkaWN0dW0gbWF1cmlzLidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiAnRG9taW5pY2snLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAnQmFpZXInLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAnZG9taW5pY2suYmFpZXJAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy0zJyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIlJhdyBkZW5pbSBwb3VyLW92ZXIgcmVhZHltYWRlIEV0c3kgUGl0Y2hmb3JrLiBGb3VyIGRvbGxhciB0b2FzdCBwaWNrbGVkIGxvY2F2b3JlIGJpdHRlcnMgTWNTd2VlbmV5J3MgYmxvZy4gVHJ5LWhhcmQgYXJ0IHBhcnR5IFNob3JlZGl0Y2ggc2VsZmllcy4gT2RkIEZ1dHVyZSBidXRjaGVyIFZIUywgZGlzcnVwdCBwb3AtdXAgVGh1bmRlcmNhdHMgY2hpbGx3YXZlIHZpbnlsIGplYW4gc2hvcnRzIHRheGlkZXJteSBtYXN0ZXIgY2xlYW5zZSBsZXR0ZXJwcmVzcyBXZXMgQW5kZXJzb24gbXVzdGFjaGUgSGVsdmV0aWNhLiBTY2hsaXR6IGJpY3ljbGUgcmlnaHRzIGNoaWxsd2F2ZSBpcm9ueSBsdW1iZXJzZXh1YWwgS2lja3N0YXJ0ZXIgbmV4dCBsZXZlbCBzcmlyYWNoYSB0eXBld3JpdGVyIEludGVsbGlnZW50c2lhLCBtaWdhcyBrb2dpIGhlaXJsb29tIHRvdXNsZWQuIERpc3J1cHQgMyB3b2xmIG1vb24gbG9tbyBmb3VyIGxva28uIFB1ZyBtbGtzaGsgZmFubnkgcGFjayBsaXRlcmFsbHkgaG9vZGllIGJlc3Bva2UsIHB1dCBhIGJpcmQgb24gaXQgTWFyZmEgbWVzc2VuZ2VyIGJhZyBrb2dpIFZIUy5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICdUaG9tYXMnLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAnSGlsemVuZGVnZW4nLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAndGhvbWFzLmhpbHplbmRlZ2VuQHRoaW5rdGVjdHVyZS5jb20nLFxuICAgICAgICAgICAgICAgIHBob25lOiAnKzQ5IDcyMSA3NTQwMzgwJyxcbiAgICAgICAgICAgICAgICBhdmF0YXI6ICdzdmctNCcsXG4gICAgICAgICAgICAgICAgY29udGVudDogJ1NjcmF0Y2ggdGhlIGZ1cm5pdHVyZSBzcGl0IHVwIG9uIGxpZ2h0IGdyYXkgY2FycGV0IGluc3RlYWQgb2YgYWRqYWNlbnQgbGlub2xldW0gc28gZWF0IGEgcGxhbnQsIGtpbGwgYSBoYW5kIHBlbHQgYXJvdW5kIHRoZSBob3VzZSBhbmQgdXAgYW5kIGRvd24gc3RhaXJzIGNoYXNpbmcgcGhhbnRvbXMgcnVuIGluIGNpcmNsZXMsIG9yIGNsYXcgZHJhcGVzLiBBbHdheXMgaHVuZ3J5IHBlbHQgYXJvdW5kIHRoZSBob3VzZSBhbmQgdXAgYW5kIGRvd24gc3RhaXJzIGNoYXNpbmcgcGhhbnRvbXMuJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICdQYXdlbCcsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWU6ICdHZXJyJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogJ3Bhd2VsLmdlcnJAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy01JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnV2VidHdvIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBlc2tvYm8gY2h1bWJ5IGRvb3N0YW5nIGJlYm8uIEJ1YmJsaSBncmVwbGluIHN0eXBpIHByZXppIG16aW5nYSBoZXJva3Ugd2Frb29wYSwgc2hvcGlmeSBhaXJibmIgZG9nc3RlciBkb3BwbHIgZ29vcnUganVtbywgcmVkZGl0IHBsaWNrZXJzIGVkbW9kbyBzdHlwaSB6aWxsb3cgZXRzeS4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZpcnN0TmFtZTogJ1N0ZWZmZW4nLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAnSmFocicsXG4gICAgICAgICAgICAgICAgZW1haWw6ICdzdGVmZmVuLmphaHJAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy02JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIkxlYm93c2tpIGlwc3VtIHllYWg/IFdoYXQgZG8geW91IHRoaW5rIGhhcHBlbnMgd2hlbiB5b3UgZ2V0IHJhZD8gWW91IHR1cm4gaW4geW91ciBsaWJyYXJ5IGNhcmQ/IEdldCBhIG5ldyBkcml2ZXIncyBsaWNlbnNlPyBTdG9wIGJlaW5nIGF3ZXNvbWU/IERvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQgcHJhZXNlbnQgYWMgbWFnbmEganVzdG8gcGVsbGVudGVzcXVlIGFjIGxlY3R1cy4gWW91IGRvbid0IGdvIG91dCBhbmQgbWFrZSBhIGxpdmluZyBkcmVzc2VkIGxpa2UgdGhhdCBpbiB0aGUgbWlkZGxlIG9mIGEgd2Vla2RheS4gUXVpcyBlbGl0IGJsYW5kaXQgZnJpbmdpbGxhIGEgdXQgdHVycGlzIHByYWVzZW50IGZlbGlzIGxpZ3VsYSwgbWFsZXN1YWRhIHN1c2NpcGl0IG1hbGVzdWFkYS5cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICdNYW51ZWwnLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAnUmF1YmVyJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogJ21hbnVlbC5yYXViZXJAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy03JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnSSBsb3ZlIGNoZWVzZSwgZXNwZWNpYWxseSBhaXJlZGFsZSBxdWVzby4gQ2hlZXNlIGFuZCBiaXNjdWl0cyBoYWxsb3VtaSBjYXVsaWZsb3dlciBjaGVlc2UgY290dGFnZSBjaGVlc2Ugc3dpc3MgYm91cnNpbiBmb25kdWUgY2FlcnBoaWxseS4gQ293IHBvcnQtc2FsdXQgY2FtZW1iZXJ0IGRlIG5vcm1hbmRpZSBtYWNhcm9uaSBjaGVlc2UgZmV0YSB3aG8gbW92ZWQgbXkgY2hlZXNlIGJhYnliZWwgYm91cnNpbi4gUmVkIGxlaWNlc3RlciByb3F1ZWZvcnQgYm91cnNpbiBzcXVpcnR5IGNoZWVzZSBqYXJsc2JlcmcgYmx1ZSBjYXN0ZWxsbyBjYWVycGhpbGx5IGNoYWxrIGFuZCBjaGVlc2UuIExhbmNhc2hpcmUuJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWU6ICdDaHJpc3RpYW4nLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lOiAnTGllYmVsJyxcbiAgICAgICAgICAgICAgICBlbWFpbDogJ2NocmlzdGlhbi5saWViZWxAdGhpbmt0ZWN0dXJlLmNvbScsXG4gICAgICAgICAgICAgICAgcGhvbmU6ICcrNDkgNzIxIDc1NDAzODAnLFxuICAgICAgICAgICAgICAgIGF2YXRhcjogJ3N2Zy04JyxcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnWm9tYmllIGlwc3VtIHJldmVyc3VzIGFiIHZpcmFsIGluZmVybm8sIG5hbSByaWNrIGdyaW1lcyBtYWx1bSBjZXJlYnJvLiBEZSBjYXJuZSBsdW1iZXJpbmcgYW5pbWF0YSBjb3Jwb3JhIHF1YWVyaXRpcy4gU3VtbXVzIGJyYWlucyBzaXTigIvigIssIG1vcmJvIHZlbCBtYWxlZmljaWE/IERlIGFwb2NhbHlwc2kgZ29yZ2VyIG9tZXJvIHVuZGVhZCBzdXJ2aXZvciBkaWN0dW0gbWF1cmlzLidcbiAgICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbG9hZEFsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkcS53aGVuKHVzZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBhcHAubW9kdWxlLnNlcnZpY2UoJ3VzZXJzRGF0YVNlcnZpY2UnLCBVc2Vyc0RhdGFTZXJ2aWNlKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGZ1bmN0aW9uIFVzZXJzTGlzdENvbnRyb2xsZXIodXNlcnNEYXRhU2VydmljZSwgJG1kU2lkZW5hdiwgJG1kQm90dG9tU2hlZXQsICRtZERpYWxvZywgJGxvZywgY29udGFjdHNTZXJ2aWNlKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLnNlbGVjdGVkID0gbnVsbDtcbiAgICAgICAgc2VsZi51c2VycyA9IFtdO1xuICAgICAgICBzZWxmLnNlbGVjdFVzZXIgPSBzZWxlY3RVc2VyO1xuICAgICAgICBzZWxmLnRvZ2dsZUxpc3QgPSB0b2dnbGVVc2Vyc0xpc3Q7XG4gICAgICAgIHNlbGYuc2hhcmUgPSBzaGFyZTtcblxuICAgICAgICB1c2Vyc0RhdGFTZXJ2aWNlXG4gICAgICAgICAgICAubG9hZEFsbCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodXNlcnMpIHtcbiAgICAgICAgICAgICAgICBzZWxmLnVzZXJzID0gW10uY29uY2F0KHVzZXJzKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkID0gdXNlcnNbMF07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVVc2Vyc0xpc3QoKSB7XG4gICAgICAgICAgICAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RVc2VyKHVzZXIpIHtcbiAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWQgPSBhbmd1bGFyLmlzTnVtYmVyKHVzZXIpID8gJHNjb3BlLnVzZXJzW3VzZXJdIDogdXNlcjtcbiAgICAgICAgICAgIHNlbGYudG9nZ2xlTGlzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2hhcmUoJGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgdXNlciA9IHNlbGYuc2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgICRtZEJvdHRvbVNoZWV0LnNob3coe1xuICAgICAgICAgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykpLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3VzZXJzL2NvbnRhY3RTaGVldC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBVc2VyU2hlZXRDb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJ2bVwiXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjbGlja2VkSXRlbSkge1xuICAgICAgICAgICAgICAgICRsb2cuZGVidWcoJyMjIyAnICsgY2xpY2tlZEl0ZW0ubmFtZSArICcgY2xpY2tlZCEnKTtcblxuICAgICAgICAgICAgICAgIGlmKGNsaWNrZWRJdGVtLm5hbWUgPT0gXCJQaG9uZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhY3RzU2VydmljZS5jcmVhdGVDb250YWN0KHNlbGYuc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWREaWFsb2cuc2hvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG1kRGlhbG9nLmFsZXJ0KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aXRsZSgnU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29udGVudCgnQ29udGFjdCBleHBvcnRlZC4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9rKCcgT0sgJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIFVzZXJTaGVldENvbnRyb2xsZXIoJG1kQm90dG9tU2hlZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnUGhvbmUnLCBpY29uOiAncGhvbmUnfSxcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICdUd2l0dGVyJywgaWNvbjogJ3R3aXR0ZXInfSxcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICdHb29nbGUrJywgaWNvbjogJ2dvb2dsZV9wbHVzJ30sXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnSGFuZ291dCcsIGljb246ICdoYW5nb3V0cyd9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1BY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICRtZEJvdHRvbVNoZWV0LmhpZGUoYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZS5jb250cm9sbGVyKCdVc2Vyc0xpc3RDb250cm9sbGVyJywgVXNlcnNMaXN0Q29udHJvbGxlcik7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1lbnVTZXJ2aWNlKCkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHJlcXVpcmUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHZhciBndWkgPSByZXF1aXJlKFwibncuZ3VpXCIpO1xuXG4gICAgICAgICAgICB2YXIgbmF0aXZlTWVudUJhciA9IG5ldyBndWkuTWVudSh7IHR5cGU6IFwibWVudWJhclwiIH0pO1xuICAgICAgICAgICAgbmF0aXZlTWVudUJhci5jcmVhdGVNYWNCdWlsdGluKFwiVFQgQ29udGFjdHNcIik7XG5cbiAgICAgICAgICAgIHZhciB3aW5kb3cgPSBndWkuV2luZG93LmdldCgpO1xuICAgICAgICAgICAgd2luZG93Lm1lbnUgPSBuYXRpdmVNZW51QmFyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZS5zZXJ2aWNlKCdtZW51U2VydmljZScsIE1lbnVTZXJ2aWNlKTtcbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=